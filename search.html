<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>TEdashboard</title>
  <link rel="stylesheet" href="css/index.css">
</head>

<body>
  <!--头部的盒子-->
  <header>
    <h1>TEdashboard</h1>
  </header>
  <!--页面主体部分-->
  <section class="mainbox">
    <div class="column">
      <div class="panel bar">
        <!--<h2>The Length of TE</h2>-->
        <div class="chart"></div>
        <div class="panel-footer"></div>
      </div>
      <div class="panel boxplot">
        <div class="chart"></div>
        <div class="panel-footer"></div>
      </div>
      <div class="panel 2">
        <h2>Download files</h2>
        <div class="download" id="download">
            <ul>
              <li><a href='fasta/ .fa' download=" .fa"> Download the  's fasta file</a></li>
              <li><a href='gtf/ .gtf' download=" .gtf"> Download the  's gtf file</a></li>
            </ul>
        </div>
        <div class="panel-footer"></div>
      </div>

    </div>
    <div class="column">
      <!--搜索模块-->
      <div class="search">
        <div class="searchbar">
          <input type="image" class="mg" src=./images/search.png id="btn">
          <input type="text" id="search" name="gene_name" class="" value="Please input TE name"
          onfocus="if(value='Please input TE name')value=''"
          onblur="if(!value)value='Please input TE name'"
          required="required"
          >
        </div>
      </div>
      <!--dendrogram模块-->
      <div class="clas">
        <div class="chart"></div>
      </div>
    </div>
    <div class="column">
      <div class="panel copynumber">
        <!--<h2>The Length of TE</h2>-->
        <div class="chart"></div>
        <div class="panel-footer"></div>
      </div>
      <div class="panel pie">
        <div class="chart"></div>
        <div class="panel-footer"></div>
      </div>
      <div class="panel bartest">
        <h2>Other</h2>
        <div class="chart"></div>
        <div class="panel-footer"></div>
      </div> 
    </div>
  </section>
  <script type="text/javascript">
    console.log(location.href);
    const idx = location.href.indexOf('name=');
    const val = location.href.slice(idx+5);
    window.onload = () => {
      document.getElementById('download').innerHTML = 
      `
        <ul >
          <li><a href='fasta/${val}.fa' download="${val}.fa"> Download the ${val}'s fasta file</a></li>
          <li><a href='gtf/${val}.gtf' download="${val}.gtf"> Download the ${val}'s gtf file</a></li>
        </ul>
      `;
    };
  </script>
  <script src="js/echarts.min.js"></script>
  <script src="js/jquery-3.6.0.min.js"></script>
  <script src="js/copy_number_search.js"></script>
  <script src='js/index.js'></script>
  <script src="js/pie_ATGC_search.js"></script>
  <script src='js/length_search.js'></script>
  <script src="js/line_ATGC_search.js"></script>
  <script>
      document.getElementById('btn').addEventListener('click',  () => {
        console.log('aaaa');
        const val = document.getElementById('search').value;
        window.location.replace("http://localhost:8081/TEdashboard/search.html?name="+val);
      });
      document.onkeyup = function(e) {
        // 兼容FF和IE和Opera
        var event = e || window.event;
        var key = event.which || event.keyCode || event.charCode;
        if (key == 13) {
        console.log('aaaa');
        const val = document.getElementById('search').value;
        window.location.replace("http://localhost:8081/TEdashboard/search.html?name="+val);
  }
};
  </script>
</body>
</html>